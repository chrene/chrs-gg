---
import Layout from '~/layouts/PageLayout.astro';

import Header from '~/components/widgets/Header.astro';
import Hero from '~/components/widgets/Hero.astro';
import Content from '~/components/widgets/Content.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Features3 from '~/components/widgets/Features3.astro';
import Steps from '~/components/widgets/Steps.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import { getPermalink } from '~/utils/permalinks';

const metadata = {
  title: 'Christian Enevoldsen · Portfolio',
};
---

<Layout metadata={metadata}>
  <Fragment slot="announcement"></Fragment>

  <Fragment slot="header">
    <Header
      links={[
        { text: 'Home', href: '#' },
        { text: 'About', href: '#about' },
        { text: 'Resume', href: '#resume' },
        { text: 'Projects', href: '#projects' },
        { text: 'Blog', href: '#blog' },
        { text: 'GitHub', href: 'https://github.com/chrene' },
      ]}
      actions={[
        {
          text: 'Contact',
          href: getPermalink('/contact#form'),
        },
      ]}
      isSticky
      showToggleTheme
    />
  </Fragment>

  <Hero id="hero" title="Christian Enevoldsen" tagline="Software Developer">
    <Fragment slot="subtitle">
      Software developer from Denmark
      <br />
      Writing code, learning things, and sharing the useful bits.
    </Fragment>
  </Hero>

  <Content
    id="about"
    columns={2}
    items={[
      {
        icon: 'tabler:brand-github',
        callToAction: {
          target: '_blank',
          text: 'GitHub',
          href: 'https://github.com/chrene',
        },
      },
      {
        icon: 'tabler:brand-linkedin',
        callToAction: {
          target: '_blank',
          text: 'LinkedIn',
          href: 'https://linkedin.com/in/christianenevoldsen',
        },
      },
    ]}
    image={{
      src: '~/assets/images/me.jpeg',
      alt: 'Christian Enevoldsen avatar',
      loading: 'eager',
    }}
  >
    <Fragment slot="content">
      <h2 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">About me</h2>
      <p>
        Hey! I'm a software developer who loves building intuitive apps and simple solutions to tricky problems. I’ve
        worked with Angular, React, Node.js, and C#, and these days I mostly use Angular with Nx, RxJS, and TypeScript,
        plus Astro for side projects.
      </p>
      <br />
      <p>Besides coding, I'm a proud father of twins who occasionally finds time to make music.</p>
    </Fragment>
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-neutral-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <Steps
    id="resume"
    title="Experience"
    items={[
      {
        title: 'Senior Software Engineer · LuggageHero <br /> <span class="text-sm font-normal">2024 - Present</span>',
        description: `Working on a global luggage storage app focused on frontend architecture, features, and maintainability with Angular, RxJS, and Nx.`,
        icon: 'tabler:briefcase',
      },
      {
        title: 'Senior Software Developer · Hejdoktor <br /> <span class="text-sm font-normal">2023 - 2024</span>',
        description: `Built features like chat and video (VDX, Azure Video) for Hejdoktor and Hejkommune apps. Worked across iOS/Android (Xamarin/Maui) and web (React, TypeScript, C#/.NET).`,
        icon: 'tabler:heartbeat',
      },
      {
        title: 'Product Owner · SOFACOMPANY <br /> <span class="text-sm font-normal">2021 - 2023</span>',
        description: `Took a step into product ownership, leading development of a PWA storefront built with Magento and React. Worked with both internal and external developers, ran A/B tests, and contributed to related projects like a 3D sofa builder. Learned a lot from the experience, but eventually chose to return to hands-on development, where I feel most at home, at least for now.`,
        icon: 'tabler:sofa',
      },
      {
        title: 'Scrum Master & Developer · SCHØDT <br /> <span class="text-sm font-normal">2020 - 2021</span>',
        description: `Bootstrapped <a class="underline" href="https://flatr.dk" target="_blank">flatr.dk</a>, a waitlist platform for co-ops. Built with NestJS on the backend and vanilla JS with EJS on the frontend, using WordPress as a headless API. Also took on light Scrum Master responsibilities and handled backlog management.`,
        icon: 'tabler:building',
      },
      {
        title: 'Developer · YourLocal <br /> <span class="text-sm font-normal">2016 - 2020</span>',
        description: `Started as a junior dev, migrating a Rails backend to Node.js. Worked on a B2C food marketplace app and an admin panel using AngularJS, Node.js, and Ionic, gaining experience across the stack.`,
        icon: 'tabler:burger',
      },
    ]}
    classes={{ container: 'max-w-3xl' }}
  />

  <Steps
    id="resume"
    title="Education"
    items={[
      {
        title: 'Computer Science at University of Copenhagen <br />',
        icon: 'tabler:school',
      },
    ]}
    classes={{ container: 'max-w-3xl' }}
  />

  <Features3
    title="Tech Stack"
    subtitle="Here are the tools and technologies I work with regularly."
    columns={3}
    defaultIcon="tabler:point-filled"
    items={[
      { title: 'TypeScript', description: 'Primary language across projects.' },
      { title: 'NX', description: 'Monorepo setup with Nx mostly for enterprise solutions.' },
      {
        title: 'Angular / React / Next.js',
        description: 'Primary frameworks for building web.',
      },
      {
        title: 'Ionic / React Native',
        description: 'Frameworks for building cross-platform mobile apps.',
      },
      { title: 'Redux / RxJS', description: 'Core for reactive state and async flows.' },
      { title: 'Astro', description: 'Static-first for side projects and content sites.' },
      { title: 'SCSS / Tailwind CSS', description: 'Go to styling solution.' },
      { title: 'Hapi / Express / NestJS', description: 'APIs and backend glue.' },
      { title: 'ASP.NET', description: 'Used for building web apps and backends' },
      { title: 'PostgreSQL', description: 'Used this for relational data storage.' },
      { title: 'Redis', description: 'Caching and in-memory data structure store.' },
      { title: 'MongoDB', description: 'NoSQL database for flexible data models.' },
    ]}
  />

  <Content
    id="projects"
    title="Projects"
    subtitle="A few things I've built or am building."
    isReversed
    items={[
      {
        title: 'energitekniklolland.dk',
        description: 'A website built with Webflow for a Danish energy consultancy.',
      },
      {
        title: 'pdffaktura.dk',
        description: 'Built with Next.js · A simple invoicing app.',
      },
      {
        title: 'skylume',
        description: 'A very simple and lightweight weather app.',
      },
      {
        title: 'sceneshot',
        description: 'A tool for creating beautiful social media posts. NextJs',
      },
    ]}
    image={{
      src: 'https://images.pexels.com/photos/792194/pexels-photo-792194.jpeg',
      alt: 'Developer project preview',
    }}
    callToAction={{
      target: '_blank',
      text: 'View on GitHub',
      icon: 'tabler:chevron-right',
      href: 'https://github.com/chrene',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">Side Projects & Experiments</h3>
    </Fragment>
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-neutral-100 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <CallToAction
    title="Let's work together"
    subtitle="Have an idea or need help with a project?"
    actions={[
      {
        variant: 'primary',
        text: 'Contact me',
        href: getPermalink('/contact#form'),
      },
    ]}
  />

  <BlogLatestPosts
    id="blog"
    title="Latest posts from the blog"
    information={`Occasional write-ups on dev topics, project retros, and ideas from the indie dev world.`}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-neutral-50 dark:bg-transparent"></div>
    </Fragment>
  </BlogLatestPosts>
</Layout>
